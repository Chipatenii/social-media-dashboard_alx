(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){e.exports=a(31)},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var r=a(0),l=a.n(r),n=a(15),o=a.n(n),c=a(5),s=a(3),u=a(32);const i="http://localhost:5000/api/posts/";var m={getFeed:async()=>{return(await u.a.get(i+"feed",{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data},createPost:async e=>{return(await u.a.post(i,{text:e},{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data},deletePost:async e=>{return(await u.a.delete(i+e,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data},likePost:async e=>{return(await u.a.post(i+e+"/like",{},{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data},commentOnPost:async(e,t)=>{return(await u.a.post(i+e+"/comment",{text:t},{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data}};var d=e=>{let{post:t}=e;return l.a.createElement("div",{className:"post"},l.a.createElement("h2",null,t.user.name),l.a.createElement("p",null,t.text),l.a.createElement("button",{onClick:async()=>{try{await m.deletePost(t._id)}catch(e){console.error(e)}}},"Delete"))};var g=()=>{const[e,t]=Object(r.useState)([]);return Object(r.useEffect)(()=>{(async()=>{try{const a=await m.getFeed();t(a.data.posts)}catch(e){console.error(e)}})()},[]),l.a.createElement("div",null,l.a.createElement("h1",null,"Your Feed"),e.map(e=>l.a.createElement(d,{key:e._id,post:e})))};a(26);var p=()=>l.a.createElement("aside",{className:"sidebar"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(c.b,{to:"/"},"Feed")),l.a.createElement("li",null,l.a.createElement(c.b,{to:"/profile"},"My Profile"))));const E=Object(r.createContext)(),h=e=>{let{children:t}=e;const[a,n]=Object(r.useState)(null),[o,c]=Object(r.useState)(!0);Object(r.useEffect)(()=>{(async()=>{const e=JSON.parse(localStorage.getItem("user"));e&&n(e),c(!1)})()},[]);return l.a.createElement(E.Provider,{value:{user:a,loading:o,login:e=>{n(e),localStorage.setItem("user",JSON.stringify(e))},logout:()=>{n(null),localStorage.removeItem("user")},setUser:n}},t)};a(27);var v=()=>{const{user:e,logout:t}=Object(r.useContext)(E);return l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"logo"},l.a.createElement(c.b,{to:"/"},"Social Media Dashboard")),l.a.createElement("nav",{className:"nav"},e?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.b,{to:"/"},"Feed"),l.a.createElement(c.b,{to:`/profile/${e._id}`},"Profile"),l.a.createElement("button",{onClick:t},"Logout")):l.a.createElement(l.a.Fragment,null,l.a.createElement(c.b,{to:"/login"},"Login"),l.a.createElement(c.b,{to:"/register"},"Register"))))};a(28);var S=()=>l.a.createElement("footer",{className:"footer"},l.a.createElement("p",null,"\xa9 2024 Social Media Dashboard. All rights reserved."));var b=()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(v,null),l.a.createElement("div",{className:"main-content"},l.a.createElement(p,null),l.a.createElement(g,null)),l.a.createElement(S,null));var f={register:async(e,t,a)=>{return(await u.a.post("http://localhost:5000/api/auth/register",{name:e,email:t,password:a})).data},login:async(e,t)=>{const a=await u.a.post("http://localhost:5000/api/auth/login",{email:e,password:t});return a.data.token&&localStorage.setItem("user",JSON.stringify(a.data)),a.data},logout:()=>{localStorage.removeItem("user")},isAuthenticated:()=>{return!!localStorage.getItem("user")}};a(14);var y=()=>{const[e,t]=Object(r.useState)(""),[a,n]=Object(r.useState)(""),{setUser:o}=Object(r.useContext)(E),c=Object(s.o)();return l.a.createElement("div",{className:"auth-container"},l.a.createElement("h2",null,"Login"),l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{const t=await f.login(e,a);o(t),c("/")}catch(r){alert("Login failed")}}},l.a.createElement("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value)}),l.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>n(e.target.value)}),l.a.createElement("button",{type:"submit"},"Login")))};var w=()=>{const[e,t]=Object(r.useState)(""),[a,n]=Object(r.useState)(""),[o,c]=Object(r.useState)(""),u=Object(s.o)();return l.a.createElement("div",{className:"auth-container"},l.a.createElement("h2",null,"Register"),l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{await f.register(e,a,o),u("/login")}catch(r){alert("Registration failed")}}},l.a.createElement("input",{type:"text",placeholder:"Name",value:e,onChange:e=>t(e.target.value)}),l.a.createElement("input",{type:"email",placeholder:"Email",value:a,onChange:e=>n(e.target.value)}),l.a.createElement("input",{type:"password",placeholder:"Password",value:o,onChange:e=>c(e.target.value)}),l.a.createElement("button",{type:"submit"},"Register")))};const O="http://localhost:5000/api/users/";var N={getProfile:async()=>{return(await u.a.get(O+"me",{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data},getUser:async e=>{return(await u.a.get(O+e,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data},updateProfile:async e=>{return(await u.a.put(O+"me",e,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data},followUser:async e=>{return(await u.a.post(O+e+"/follow",{},{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data},unfollowUser:async e=>{return(await u.a.post(O+e+"/unfollow",{},{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}})).data}};var k=e=>{let{match:t}=e;const[a,n]=Object(r.useState)(null);return Object(r.useEffect)(()=>{(async()=>{try{const a=await N.getUser(t.params.id);n(a.data.user)}catch(e){console.error(e)}})()},[t.params.id]),a?l.a.createElement("div",null,l.a.createElement("h1",null,a.name),l.a.createElement("p",null,a.bio)):l.a.createElement("div",null,"Loading...")};var I=()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(v,null),l.a.createElement("div",{className:"profile-page"},l.a.createElement(k,null)),l.a.createElement(S,null));a(29);var j=function(){return l.a.createElement(h,null,l.a.createElement(c.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/",element:l.a.createElement(b,null)}),l.a.createElement(s.a,{path:"/login",element:l.a.createElement(y,null)}),l.a.createElement(s.a,{path:"/register",element:l.a.createElement(w,null)}),l.a.createElement(s.a,{path:"/profile/:userId",element:l.a.createElement(I,null)})))))};a(30);o.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(j,null)))}},[[16,1,2]]]);
//# sourceMappingURL=main.021588b6.chunk.js.map